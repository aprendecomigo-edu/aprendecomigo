QA Test Case: School Admin Calendar and Scheduling Powers

Test ID: SCHED-003
Test Name: School Admin Calendar and Scheduling Powers
Purpose: Verify that school admins can view all scheduled classes and schedule classes for any student within their school
Expected Result: Admin accesses calendar, sees all classes, and can schedule classes for any student

=== CONTEXT (Pre-test Requirements) ===

System Information:
- Project: Aprende Comigo - Educational platform
- Architecture: Django REST backend + React Native frontend
- Admin Role Powers: School admins can see all classes and schedule for any student
- Permission Logic: Admins have full scheduling permissions within their school
- Cross-User Visibility: Admins see all classes and can manage all schedules

Required Environment Setup:
1. Project Location: /Users/anapmc/Code/aprendecomigo/
2. Python Virtual Environment: .venv/ in project root
3. Environment Variables:
   - DJANGO_ENV=development
   - EXPO_PUBLIC_ENV=development

Test Data:
- Admin Email: admin.test@example.com
- Student1 Email: student1.test@example.com
- Student2 Email: student2.test@example.com
- Teacher Email: teacher.test@example.com
- School Name: "Test School"

=== DETAILED STEP-BY-STEP INSTRUCTIONS ===

Step 1: Environment Setup
Commands:
  cd /Users/anapmc/Code/aprendecomigo
  source .venv/bin/activate
  make dev

Expected: Both servers start successfully
Screenshot: 01_servers_started.png

Step 2: Admin Login
1. Open browser to http://localhost:8081
2. Enter admin email: admin.test@example.com
3. Complete login process
4. Verify admin dashboard access

Expected: Admin successfully logs in and reaches dashboard
Screenshot: 02_admin_login_success.png

Step 3: Navigate to Calendar
1. Click on "Calendar" or "Schedule" menu item
2. Wait for calendar interface to load
3. Verify calendar view displays

Expected: Calendar interface loads showing admin's comprehensive view
Screenshot: 03_calendar_interface_loaded.png

Step 4: Verify Book Class Button Visibility
1. Look for "Book Class" or "Schedule Class" button
2. Verify button is visible and enabled for admin
3. Check button styling and accessibility

Expected: Book Class button is visible and accessible to admin
Screenshot: 04_book_class_button_visible.png

Step 5: Verify Admin Sees All Classes
1. Check that all classes in the school are visible
2. Verify admin can see:
   - Classes with different students
   - Classes with different teachers
   - All class statuses and details
3. Count total classes visible

Expected: Admin sees all classes across the school
Screenshot: 05_all_classes_visible.png

Step 6: Test Admin Class Scheduling
1. Click "Book Class" button
2. Wait for booking form to load
3. Verify admin can select any student from dropdown
4. Verify student selection is NOT read-only

Expected: Admin can select any student for class booking
Screenshot: 06_student_selection_enabled.png

Step 7: Schedule Class for Student1
1. Select "Student1" from student dropdown
2. Select teacher from teacher dropdown
3. Select future date
4. Choose available time slot
5. Fill class details
6. Submit booking

Expected: Admin successfully schedules class for another student
Screenshot: 07_class_scheduled_for_student1.png

Step 8: Verify Class Appears in Calendar
1. Check that newly scheduled class appears
2. Verify class shows correct student and teacher
3. Verify admin is listed as "booked_by"
4. Check all class details are correct

Expected: New class appears with correct information
Screenshot: 08_new_class_in_calendar.png

Step 9: Test Admin Class Management
1. Click on a scheduled class
2. Verify admin can see all class details
3. Check available admin actions:
   - Confirm class
   - Complete class
   - Cancel class
   - Edit class (if available)

Expected: Admin has full class management capabilities
Screenshot: 09_admin_class_management.png

Step 10: Test Calendar View Filters
1. Look for filtering options
2. Test filtering by:
   - Student (if available)
   - Teacher (if available)
   - Status (if available)
3. Verify filters work correctly

Expected: Calendar filtering works for admin comprehensive view
Screenshot: 10_calendar_filtering.png

Step 11: Backend Verification
Commands:
  cd /Users/anapmc/Code/aprendecomigo/backend
  python manage.py shell -c "
  from scheduler.models import ClassSchedule
  from accounts.models import CustomUser
  admin_user = CustomUser.objects.get(email='admin.test@example.com')
  all_classes = ClassSchedule.objects.filter(school__schoolmembership__user=admin_user)
  print(f'Admin can see {all_classes.count()} classes total')
  for cls in all_classes:
      print(f'Class: {cls.title}')
      print(f'Student: {cls.student.name}')
      print(f'Teacher: {cls.teacher.user.name}')
      print(f'Booked by: {cls.booked_by.name}')
      print('---')
  "

Expected: Backend confirms admin can see all classes
Screenshot: 11_backend_verification.png

Step 12: Test Multi-Student Scheduling
1. Schedule another class for Student2
2. Verify admin can book for different students
3. Check both classes appear in calendar
4. Verify no conflicts or issues

Expected: Admin can schedule for multiple different students
Screenshot: 12_multi_student_scheduling.png

=== PASS/FAIL CRITERIA ===

PASS: Admin successfully logs in AND sees all classes AND can schedule for any student AND has full class management capabilities AND all scheduled classes appear correctly

FAIL: Admin cannot see all classes OR cannot schedule for other students OR booking functionality limited OR scheduled classes don't appear

Overall Result: PASS only if ALL steps pass, FAIL if ANY step fails

=== SPECIAL CONSIDERATIONS ===

Admin Role Powers:
- Can view all classes in their school
- Can schedule classes for any student
- Can manage all classes (confirm, complete, cancel)
- Student selection is NOT read-only
- Full calendar visibility and control

Permission Verification:
- Admin permissions work consistently
- No restrictions on student selection
- Full access to scheduling functionality
- Proper cross-user visibility maintained
