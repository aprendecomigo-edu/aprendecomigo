QA Test Case: Teacher Registration on School

Test ID: FORM-006
Test Name: Teacher Registration on School Platform
Purpose: Verify that a new teacher can successfully register on a school using the teacher onboarding process, including email verification and profile completion
Expected Result: New teacher successfully registers, completes onboarding, and gains access to the platform with proper teacher role permissions

=== CONTEXT (Pre-test Requirements) ===

System Information:
- Project: Aprende Comigo - Educational platform
- Architecture: Django REST Framework backend + React Native frontend with Expo
- Authentication: Passwordless email verification system
- Teacher registration involves full onboarding process with profile completion

Required Environment Setup:
1. Project Location: /Users/anapmc/Code/aprendecomigo/
2. Python Virtual Environment: .venv/ in project root
3. Environment Variables:
   - DJANGO_ENV=development
   - EXPO_PUBLIC_ENV=development
4. Both backend (Django) and frontend (Expo) servers must be running

Test Data:
- Test Email: newteacher@example.com (use a fresh email that doesn't exist in system)
- Teacher Details:
  - First Name: Maria
  - Last Name: Silva
  - Phone: +55 11 99999-9999
  - Subject Area: Mathematics
  - Experience Level: 5 years
- School Context: Must have an existing school in system for teacher to join

Database State Requirements:
- At least one school must exist in the system
- Test email must NOT already exist in the database
- Clean state with no previous registration attempts for test email

=== DETAILED STEP-BY-STEP INSTRUCTIONS ===

Step 1: Environment Setup and Server Start
Commands:
  cd /Users/anapmc/Code/aprendecomigo
  source .venv/bin/activate
  make dev

Screenshot: 01_servers_running.png

Step 2: Navigate to Application and Access Registration
1. Open browser to http://localhost:8081
2. Verify main page loads with sign-in option
3. Look for "Register" or "Sign Up" option
4. Click on teacher registration/signup option

Expected: Registration page loads with teacher-specific form
Screenshot: 02_teacher_registration_page.png

Step 3: Initial Registration Form Completion
1. Enter test email: newteacher@example.com
2. Enter first name: Maria
3. Enter last name: Silva
4. Select role: Teacher (if role selection is available)
5. Click "Register" or "Continue" button

Expected: Form accepts input and proceeds to next step (email verification or profile completion)
Screenshot: 03_initial_form_completed.png

Step 4: Email Verification Process
1. System should send verification email or code
2. Check for email verification prompt in UI
3. If 6-digit code system: Enter verification code (check server logs or console for code)
4. If email link system: Follow email verification process
5. Complete email verification step

Expected: Email verification successful, proceeds to profile completion
Screenshot: 04_email_verification_completed.png

Step 5: Teacher Profile Completion
1. Complete all required teacher profile fields:
   - Phone number: +55 11 99999-9999
   - Subject area: Mathematics
   - Experience level: 5 years
   - Any additional required fields (teaching certifications, bio, etc.)
2. Upload profile photo if required
3. Set teaching preferences if available
4. Click "Complete Profile" or "Finish Registration"

Expected: Profile form accepts all input and submits successfully
Screenshot: 05_teacher_profile_completed.png

Step 6: School Association
1. If prompted, select or search for school to join
2. Enter school information or select from dropdown
3. Complete school association process
4. Submit school association request

Expected: Teacher successfully associates with school
Screenshot: 06_school_association_completed.png

Step 7: Registration Success and Dashboard Access
1. Verify registration success message appears
2. Check that user is automatically logged in
3. Navigate to teacher dashboard or main application area
4. Verify teacher-specific features are accessible
5. Check user profile shows teacher role

Expected: Teacher successfully logged in with full access to teacher features
Screenshot: 07_teacher_dashboard_access.png

Step 8: Verify Teacher Permissions and Features
1. Access teacher-specific sections (classes, students, teaching materials)
2. Verify teacher can view assigned classes (if any)
3. Check teacher profile displays correctly
4. Test teacher-specific actions (create class, view student lists, etc.)
5. Verify teacher cannot access admin-only features

Expected: Teacher has appropriate permissions and feature access
Screenshot: 08_teacher_permissions_verified.png

Step 9: Profile Information Verification
1. Navigate to user profile section
2. Verify all entered information is correctly displayed
3. Check teacher-specific profile fields
4. Verify school association is shown
5. Test profile editing functionality

Expected: All profile information displays correctly and is editable
Screenshot: 09_profile_information_verified.png

Step 10: Backend Verification
1. Check Django admin or database for new teacher record
2. Verify teacher profile was created with correct information
3. Check school association in database
4. Verify user has correct permissions/groups assigned

Commands:
  cd /Users/anapmc/Code/aprendecomigo/backend
  python manage.py shell
  from accounts.models import CustomUser, TeacherProfile
  user = CustomUser.objects.get(email='newteacher@example.com')
  teacher_profile = TeacherProfile.objects.get(user=user)
  print(f"User: {user.first_name} {user.last_name}")
  print(f"Teacher Profile: {teacher_profile}")
  print(f"User Groups: {user.groups.all()}")

Expected: Teacher record exists in database with correct information
Screenshot: 10_backend_verification.png

=== PASS/FAIL CRITERIA ===

PASS: Teacher successfully completes full registration process AND gains appropriate access to teacher features AND backend records are correctly created

FAIL: Any step in registration process fails OR teacher doesn't gain proper access OR backend records are missing/incorrect

Individual Step Criteria:
- Step 1: PASS if both servers start without errors, FAIL if either server fails to start
- Step 2: PASS if registration page loads correctly, FAIL if page doesn't load or missing teacher registration option
- Step 3: PASS if initial form accepts input and proceeds, FAIL if form validation errors or doesn't submit
- Step 4: PASS if email verification completes successfully, FAIL if verification fails or codes don't work
- Step 5: PASS if teacher profile form completes successfully, FAIL if required fields rejected or form doesn't submit
- Step 6: PASS if school association completes, FAIL if cannot associate with school
- Step 7: PASS if registration success and dashboard access works, FAIL if login fails or dashboard not accessible
- Step 8: PASS if teacher permissions work correctly, FAIL if permissions too restrictive or too permissive
- Step 9: PASS if profile information displays correctly, FAIL if information missing or incorrect
- Step 10: PASS if backend records exist and are correct, FAIL if database records missing or incorrect

Overall Result: PASS only if ALL steps pass, FAIL if ANY step fails

=== SPECIAL CONSIDERATIONS ===

Error Handling:
- Test should handle network timeouts gracefully
- Form validation errors should display clearly
- Email verification errors should be user-friendly

Security Considerations:
- Verify teacher cannot access admin functions
- Check that teacher profile data is properly sanitized
- Ensure email verification is required and working

UX/Behavioral Requirements:
- Registration process should be intuitive and user-friendly
- Clear progress indicators during multi-step process
- Success/error feedback should be immediate and clear
- Loading states should prevent double-submission

Data Cleanup:
- After test completion, consider cleaning up test data
- Document any test data that should remain for future tests

Common Issues to Watch For:
- Email verification codes not being sent or received
- Form validation rejecting valid input
- Teacher profile creation failing silently
- Incorrect permissions assigned to new teacher
- School association not working properly
- Dashboard not loading after successful registration
