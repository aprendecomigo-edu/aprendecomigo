QA Test Case: Invitation Decline Flow

Test ID: TACPT-009
Test Name: Invitation Decline Flow
Purpose: Verify that teachers can decline invitations with proper confirmation and feedback
Expected Result: Decline process is clear, confirmed, and provides appropriate feedback

=== CONTEXT (Pre-test Requirements) ===

System Information:
- Project: Aprende Comigo Platform
- Architecture: Django backend (localhost:8000) + React Native frontend (localhost:8081)
- GitHub Issue: #52 - Invitation decline functionality

Required Environment Setup:
1. Project Location: /Users/anapmc/Code/aprendecomigo
2. Development servers: `make dev`
3. Database: PostgreSQL with test data

Test Data:
- Valid invitation token for decline testing
- Test teacher email: decline.test@aprendecomigo.com
- School: Test School

=== DETAILED STEP-BY-STEP INSTRUCTIONS ===

Step 1: Navigate to Invitation
1. Access invitation URL
2. Verify invitation details display
3. Confirm decline button is present and enabled
URL: http://localhost:8081/accept-invitation/[TOKEN]

Expected: Invitation loads with decline option available
Screenshot: 01_invitation_with_decline_option.png

Step 2: Initiate Decline Process
1. Click "Declinar Convite" button
2. Verify confirmation dialog appears
3. Check that confirmation explains consequences
4. Confirm dialog has cancel option

Expected: Clear confirmation dialog with proper warnings
Screenshot: 02_decline_confirmation_dialog.png

Step 3: Test Decline Cancellation
1. Click "Cancelar" in confirmation dialog
2. Verify user returns to invitation view
3. Confirm invitation is still available for acceptance
4. Check no changes were made to invitation status

Expected: Cancellation works properly without affecting invitation
Screenshot: 03_decline_cancellation_test.png

Step 4: Complete Decline Action
1. Click decline button again
2. Confirm the decline action in dialog
3. Verify loading state during decline process
4. Check for success confirmation

Expected: Decline process completes with clear confirmation
Screenshot: 04_decline_completed.png

Step 5: Verify Post-Decline State
1. Confirm decline success message appears
2. Check that accept/decline buttons are no longer available
3. Verify appropriate next actions are provided
4. Test navigation options from declined state

Expected: Clear post-decline state with appropriate guidance
Screenshot: 05_post_decline_state.png

Step 6: Database Verification
1. Check that invitation status changed to 'declined'
2. Verify decline timestamp is recorded
3. Confirm no teacher profile or membership was created
Commands:
  python manage.py shell
  from accounts.models import TeacherInvitation
  # Verify decline status

Expected: Database accurately reflects declined invitation
Screenshot: 06_database_decline_verification.png

=== PASS/FAIL CRITERIA ===

PASS: Decline process is clear, confirmed, and properly recorded
FAIL: Missing confirmations, unclear process, or database inconsistencies

Overall Result: PASS only if ALL steps pass, FAIL if ANY step fails