{% extends 'base.html' %}

{% block title %}Dashboard | Aprende Comigo{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row">
        <div class="col-md-12 text-center">
            <h3>Redirecting to your dashboard...</h3>
            <div class="spinner-border mt-3" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <script>
                // Redirect to the appropriate dashboard based on user type
                window.onload = function() {
                    {% if user.is_admin or user.is_staff %}
                        window.location.href = "{% url 'dashboard' %}";
                    {% elif user.is_teacher %}
                        window.location.href = "{% url 'dashboard' %}";
                    {% elif user.is_student %}
                        window.location.href = "{% url 'dashboard' %}";
                    {% else %}
                        // Show error message
                        document.getElementById('redirect-message').innerText = 'Unknown user type. Please contact support.';
                        document.querySelector('.spinner-border').style.display = 'none';
                    {% endif %}
                };
            </script>
            <p id="redirect-message" class="mt-3"></p>
        </div>
    </div>
</div>
{% endblock %}
