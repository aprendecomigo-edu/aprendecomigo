{% load static %}

<tr>
    <td class="px-6 py-4 whitespace-nowrap">
        <div class="flex items-center">
            <div class="flex-shrink-0 h-10 w-10">
                <div class="h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center">
                    <span class="text-sm font-medium text-blue-800">{{ invitation.email.0|upper }}</span>
                </div>
            </div>
            <div class="ml-4">
                <div class="text-sm font-medium text-gray-900">{{ invitation.email }}</div>
            </div>
        </div>
    </td>
    <td class="px-6 py-4 whitespace-nowrap">
        <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800">{{ invitation.role }}</span>
    </td>
    <td class="px-6 py-4 whitespace-nowrap">
        <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full
            {% if invitation.status == 'Pending' or invitation.status == 'Sent' or invitation.status == 'Delivered' %}bg-yellow-100 text-yellow-800
            {% elif invitation.status == 'Accepted' %}bg-green-100 text-green-800
            {% elif invitation.status == 'Declined' or invitation.status == 'Expired' %}bg-red-100 text-red-800
            {% elif invitation.status == 'Cancelled' %}bg-gray-100 text-gray-800
            {% else %}bg-gray-100 text-gray-800{% endif %}">{{ invitation.status }}</span>
    </td>
    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
        {{ invitation.created_at|date:"j M Y" }}
    </td>
    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2">
        {% if invitation.is_active %}
            <form hx-post="{% url 'invitations' %}"
                  hx-target="#message-area"
                  hx-swap="innerHTML"
                  class="inline">
                {% csrf_token %}
                <input type="hidden" name="action" value="resend_invitation">
                <input type="hidden" name="invitation_id" value="{{ invitation.id }}">
                <button type="submit" class="text-blue-600 hover:text-blue-900 text-xs">
                    Resend
                </button>
            </form>
            <form hx-post="{% url 'invitations' %}"
                  hx-target="#message-area"
                  hx-swap="innerHTML"
                  hx-confirm="Are you sure you want to cancel this invitation?"
                  class="inline">
                {% csrf_token %}
                <input type="hidden" name="action" value="cancel_invitation">
                <input type="hidden" name="invitation_id" value="{{ invitation.id }}">
                <button type="submit" class="text-red-600 hover:text-red-900 text-xs">
                    Cancel
                </button>
            </form>
        {% else %}
            <span class="text-gray-400 text-xs">No actions</span>
        {% endif %}
    </td>
</tr>
