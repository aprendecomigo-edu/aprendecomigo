<div id="channels-list" class="space-y-2">
    {% for channel in channels %}
    <div class="channel-item p-3 rounded cursor-pointer hover:bg-gray-700 transition-colors
                {% if channel.id == selected_channel.id %}bg-gray-700{% endif %}"
         hx-post="{% url 'chat' %}"
         hx-target="#messages-container"
         hx-swap="innerHTML"
         hx-vals='{"action": "load_channel", "channel_id": "{{ channel.id }}"}'
         @click="switchChannel({{ channel.id }}, '{{ channel.name }}')">

        <!-- Channel/User Avatar -->
        <div class="flex items-center">
            <div class="w-8 h-8 rounded-full flex items-center justify-center mr-3
                        {% if channel.is_direct %}bg-blue-600{% else %}bg-green-600{% endif %}">
                <span class="text-white font-medium text-sm">
                    {% if channel.is_direct %}
                        {% for participant in channel.participants.all %}
                            {% if participant.username != user.username %}
                                {{ participant.first_name|first|upper }}
                            {% endif %}
                        {% endfor %}
                    {% else %}
                        {{ channel.name|first|upper }}
                    {% endif %}
                </span>
            </div>

            <!-- Channel Info -->
            <div class="flex-1 min-w-0">
                <div class="flex items-center justify-between">
                    <div class="text-white font-medium text-sm truncate">
                        {% if channel.is_direct %}
                            {% for participant in channel.participants.all %}
                                {% if participant.username != user.username %}
                                    {{ participant.first_name }} {{ participant.last_name }}
                                {% endif %}
                            {% endfor %}
                        {% else %}
                            {{ channel.name }}
                        {% endif %}
                    </div>
                    <div class="flex items-center space-x-2">
                        <!-- Online indicator for direct messages -->
                        {% if channel.is_direct %}
                            {% for online_user in channel.online.all %}
                                {% if online_user.username != user.username %}
                                    <div class="w-2 h-2 bg-green-400 rounded-full"></div>
                                {% endif %}
                            {% endfor %}
                        {% endif %}
                    </div>
                </div>
                <!-- Last message preview would go here -->
            </div>
        </div>
    </div>
    {% empty %}
    <div class="text-gray-400 text-sm text-center py-4">
        <svg class="w-8 h-8 mx-auto mb-2 text-gray-500" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd" />
        </svg>
        <p>No conversations yet</p>
        <p class="text-xs mt-1">Start a new conversation</p>
    </div>
    {% endfor %}
</div>
