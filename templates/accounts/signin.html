{% extends 'base.html' %}

{% block content %}
<div class="min-h-screen relative overflow-hidden flex items-center p-4">
    <!-- Background gradient shape -->
    <div class="absolute -top-56 -left-70 w-[90rem] h-[50rem] rounded-full opacity-80 bg-gradient-primary" 
         style="transform: rotate(-40deg);"></div>

    <!-- DaisyUI Card -->
    <div class="card w-full max-w-lg mx-auto glass-container p-4 rounded-xl relative z-10">
        <div class="card-body">
            <!-- Header -->
            <div class="text-center mb-8">
               <span class="text-gradient-primary mb-8 font-brand text-lg">aprendecomigo</span>
                <h1 class="card-title color-primary font-primary text-4xl font-bold justify-center">Login</h1>
            </div>

            <!-- Form -->
            <div id="signin-form-container" class="mb-6">
                <!-- Sign In Form -->
<form hx-post="{% url 'accounts:signin' %}" 
      hx-target="#signin-form-container" 
      hx-swap="innerHTML"
      class="w-full space-y-8">
    {% csrf_token %}
    
    <!-- Email or Phone Field with Join Component -->
    <div class="form-control">
        <label class="label">
            <span class="label-text font-primary font-medium">Email or phone number</span>
        </label>
        <div class="relative">
        <div class="join htmx-request:opacity-50 htmx-request:pointer-events-none transition-opacity">
        <div>
            <label class="input validator join-item">
                    <input type="text" 
                           name="email" 
                           value="{{ email|default:'' }}"
                           placeholder="your_email@example.com or +351 94567890"
                           pattern="^([^\s@]+@[^\s@]+\.[^\s@]+|[\+]?[1-9][\d]{0,15})$"
                           title="Must be a valid email address or phone number"
                           autocomplete="email tel"
                           required />
            </label>
            <div class="validator-hint">
                Must be either a valid email address or phone number
            </div>
        </div>
            
        
        <button type="submit" class="btn btn-neutral join-item bg-gradient-primary border-none text-white">
            Send Code
        </button>
        </div>
        
        <!-- Loading Spinner Overlay -->
        <div class="htmx-indicator absolute inset-0 flex items-center justify-center bg-base-100/50 backdrop-blur-sm rounded-lg opacity-0 invisible">
            <div class="loading loading-spinner loading-md text-primary"></div>
        </div>
    </div>

</form>
    </div>
            </div>

            <!-- Footer -->
            <div class="card-actions justify-center">
                <div class="text-center space-y-2">
                    <p class="text-base-content/70 font-body text-sm">Don't have an account?</p>
                    <a href="{% url 'accounts:signup' %}" class="btn btn-neutral btn-sm font-primary">
                        Create your account
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}